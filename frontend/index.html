<!DOCTYPE html>
<html>
<head>
    <title>Ambikashelf | Register/Login</title>
    </head>
    <body>
    <h1>Ambikashelf</h1>

    <h2>Register</h2>
    <form id="registerForm">
        Name: <input type="text" id="name" required><br>
            Email: <input type="email" id="email" required><br>
                Password: <input type="password" id="password" required><br>
                    <button type="submit">Register</button>
                    </form>

                    <h2>Verify Email</h2>
                    <form id="verifyForm">
                        Email: <input type="email" id="vEmail" required><br>
                            Verification Code: <input type="text" id="code" required><br>
                                <button type="submit">Verify</button>
                                </form>

                                <h2>Login</h2>
                                <form id="loginForm">
                                    Email: <input type="email" id="lEmail" required><br>
                                        Password: <input type="password" id="lPassword" required><br>
                                            <button type="submit">Login</button>
                                            </form>

                                            <script>
                                            const API = "http://localhost:3000";

                                            document.getElementById('registerForm').onsubmit = async (e) => {
                                                e.preventDefault();
                                                    const res = await fetch(`${API}/register`, {
                                                            method: "POST",
                                                                    headers: {"Content-Type":"application/json"},
                                                                            body: JSON.stringify({
                                                                                        name: document.getElementById('name').value,
                                                                                                    email: document.getElementById('email').value,
                                                                                                                password: document.getElementById('password').value
                                                                                                                        })
                                                                                                                            });
                                                                                                                                alert(await res.text());
                                                                                                                                };

                                                                                                                                document.getElementById('verifyForm').onsubmit = async (e) => {
                                                                                                                                    e.preventDefault();
                                                                                                                                        const res = await fetch(`${API}/verify`, {
                                                                                                                                                method: "POST",
                                                                                                                                                        headers: {"Content-Type":"application/json"},
                                                                                                                                                                body: JSON.stringify({
                                                                                                                                                                            email: document.getElementById('vEmail').value,
                                                                                                                                                                                        code: document.getElementById('code').value
                                                                                                                                                                                                })
                                                                                                                                                                                                    });
                                                                                                                                                                                                        alert(await res.text());
                                                                                                                                                                                                        };

                                                                                                                                                                                                        document.getElementById('loginForm').onsubmit = async (e) => {
                                                                                                                                                                                                            e.preventDefault();
                                                                                                                                                                                                                const res = await fetch(`${API}/login`, {
                                                                                                                                                                                                                        method: "POST",
                                                                                                                                                                                                                                headers: {"Content-Type":"application/json"},
                                                                                                                                                                                                                                        body: JSON.stringify({
                                                                                                                                                                                                                                                    email: document.getElementById('lEmail').value,
                                                                                                                                                                                                                                                                password: document.getElementById('lPassword').value
                                                                                                                                                                                                                                                                        })
                                                                                                                                                                                                                                                                            });
                                                                                                                                                                                                                                                                                alert(await res.text());
                                                                                                                                                                                                                                                                                };
                                                                                                                                                                                                                                                                                </script>
                                                                                                                                                                                                                                                                                </body>
                                                                                                                                                                                                                                                                                </html>